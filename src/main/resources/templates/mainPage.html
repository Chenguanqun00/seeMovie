<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>看吧</title>
<link rel="stylesheet" href="/css/bootstrap.css">  
<link rel="stylesheet" href="/css/pagination.css">  
<script src="/js/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<!-- 分页 -->
<script src="/js/jquery.pagination.js"></script>
</head>
<body>
<!-- 导航栏 -->
<nav class="navbar navbar-default" role="navigation" style="background:#AEEEEE;">
	<div class="container-fluid">
	<div class="navbar-header">
		<a class="navbar-brand" href="#"><!-- <img alt="看吧" src="..."> -->搜你所搜，看你所看！</a>
	</div>
	<div>
		<ul class="nav nav-pills" style="margin-top:10px;">
			<li><a href="#" onclick="findMovieByParam(2)">电视剧</a></li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					电影
				</a>
				<ul class="dropdown-menu">
					<li><a href="#" onclick="findMovieByParam(1)">动作</a></li>
					<li><a href="#" onclick="findMovieByParam(1)">科幻</a></li>
					<li><a href="#" onclick="findMovieByParam(1)">爱情</a></li>
					<li><a href="#" onclick="findMovieByParam(1)">文艺</a></li>
				</ul>
			</li>
		</ul>
	</div>
	</div>
</nav>
<!-- 内容展示区域 -->
<div class="container">
   <!-- 存在电影资源 -->
   <#if movieList?exists && (movieList?size > 0)>
   		<!-- 循环取值 -->
   		<#list movieList as fourMovieList>
   			<!-- 每四个一行 -->
   			<div class="row">
   			<#list fourMovieList as movie>
				<div class="col-xs-6 col-sm-3" style="width:22.5%;">
					<a href="" onclick='goToThisPage("${movie.movieId!''}")'> <img
						style="height:235px; width:100%;" src="${movie.imgUrl}"></br>${movie.movieName!''}
					</a>
				</div>
		  	</#list>
		  	</div>
		</#list>
   </#if>
   <!-- 隐藏查看的影片类型 -->
   <input id="category_id" type="hidden" value="${category!''}">
</div>
<!-- 底部分页条 -->
<div>
<div class="M-box" style="margin-top:20px;margin-left:165px;"></div>
</div>
</body>
<script type="text/javascript">
$(function() {
	$(".M-box").pagination({
		current:${pagingUtil.currentPage},
	    pageCount:${pagingUtil.totalPageSize},
	    count:5,
	    jump:true,
	    coping:true,
	    homePage:'首页',
	    endPage:'尾页',
	    prevContent:'上页',
	    nextContent:'下页',
	    callback:function(api){
	    	var nextPage = api.getCurrent();
	    	if( nextPage != null && nextPage != ""){
	    		nextPage =  nextPage;
        	}else{
        		nextPage = 1;
        	}
        	var pathName = document.location.pathname;
            var index = pathName.substr(1).indexOf("/");
            var category = $("#category_id").val();
            window.location.href=pathName.substr(0,index+1)+"/mainPage.html?currentPage="+nextPage+"&category="+category;
        }
	});
});
//根据影片类型及影片分类查找对应影片
function findMovieByParam(category){
	var pathName = document.location.pathname;
    var index = pathName.substr(1).indexOf("/");
    window.location.href=pathName.substr(0,index+1)+"/mainPage.html?category="+category;
}
//根绝影片id查看影片详情
function goToThisPage(movieId){
	var pathName = document.location.pathname;
    var index = pathName.substr(1).indexOf("/");
    window.open(pathName.substr(0,index+1)+"/movieDetail.html?movieId="+movieId);
}
</script>
</html>